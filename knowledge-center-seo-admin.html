<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Knowledge Center Admin - SEO Optimized</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      background: #f8fafc;
      color: #1e293b;
    }

    .admin-container {
      max-width: 1000px;
      margin: 0 auto;
      padding: 20px;
    }

    .header {
      background: white;
      padding: 30px;
      border-radius: 8px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
      margin-bottom: 20px;
    }

    .header h1 {
      font-size: 2rem;
      color: #2563eb;
      margin-bottom: 8px;
    }

    .header p {
      color: #64748b;
    }

    .content-box {
      background: white;
      padding: 30px;
      border-radius: 8px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }

    .btn {
      padding: 10px 20px;
      border: none;
      border-radius: 6px;
      font-size: 0.875rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s;
    }

    .btn-primary {
      background: #2563eb;
      color: white;
    }

    .btn-primary:hover {
      background: #1d4ed8;
    }

    .btn-success {
      background: #10b981;
      color: white;
    }

    .btn-success:hover {
      background: #059669;
    }

    .btn-secondary {
      background: #64748b;
      color: white;
    }

    .btn-secondary:hover {
      background: #475569;
    }

    .form-group {
      margin-bottom: 20px;
    }

    .form-group label {
      display: block;
      margin-bottom: 6px;
      font-weight: 500;
      color: #334155;
    }

    .form-group input[type="text"],
    .form-group input[type="number"],
    .form-group textarea,
    .form-group select {
      width: 100%;
      padding: 10px;
      border: 1px solid #e2e8f0;
      border-radius: 6px;
      font-size: 0.875rem;
      font-family: inherit;
    }

    .form-group textarea {
      min-height: 200px;
      font-family: inherit;
    }

    .form-group small {
      display: block;
      margin-top: 4px;
      color: #64748b;
      font-size: 0.75rem;
    }

    .form-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
    }

    .tags-input-container {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      padding: 8px;
      border: 1px solid #e2e8f0;
      border-radius: 6px;
      min-height: 42px;
    }

    .tag-pill {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 4px 10px;
      background: #2563eb;
      color: white;
      border-radius: 12px;
      font-size: 0.75rem;
    }

    .tag-pill button {
      background: none;
      border: none;
      color: white;
      cursor: pointer;
      font-size: 1rem;
    }

    .tag-input {
      border: none;
      outline: none;
      flex: 1;
      min-width: 100px;
      font-size: 0.875rem;
    }

    .output-box {
      background: #1e293b;
      color: #f1f5f9;
      padding: 20px;
      border-radius: 8px;
      font-family: 'Courier New', monospace;
      font-size: 0.875rem;
      white-space: pre-wrap;
      word-wrap: break-word;
      max-height: 600px;
      overflow-y: auto;
      margin-top: 20px;
    }

    .alert {
      padding: 12px 16px;
      border-radius: 6px;
      margin-bottom: 20px;
    }

    .alert-success {
      background: #d1fae5;
      border: 1px solid #6ee7b7;
      color: #065f46;
    }

    .alert-info {
      background: #dbeafe;
      border: 1px solid #93c5fd;
      color: #1e40af;
    }

    .alert-warning {
      background: #fef3c7;
      border: 1px solid #fde68a;
      color: #92400e;
    }

    .instruction-box {
      background: #eff6ff;
      border: 2px solid #93c5fd;
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 20px;
    }

    .instruction-box h3 {
      color: #1e40af;
      margin-bottom: 12px;
    }

    .instruction-box ol {
      margin-left: 20px;
      line-height: 1.8;
      color: #1e3a8a;
    }

    .instruction-box code {
      background: #dbeafe;
      padding: 2px 6px;
      border-radius: 4px;
      font-family: 'Courier New', monospace;
      font-size: 0.875em;
    }
  </style>
</head>
<body>
  <div class="admin-container">
    <div class="header">
      <h1>üìö Knowledge Center Admin</h1>
      <p>Create SEO-friendly articles as Shopify Pages</p>
    </div>

    <div id="alert-container"></div>

    <div class="instruction-box">
      <h3>üìå How This Works</h3>
      <ol>
        <li>Fill in the article details below</li>
        <li>Click <strong>Generate Shopify Page Content</strong></li>
        <li>Copy the generated content</li>
        <li>In Shopify: <strong>Pages ‚Üí Add page</strong> ‚Üí Paste content ‚Üí Set template to <code>page.kb-article</code></li>
        <li>Article appears automatically in your knowledge center!</li>
      </ol>
    </div>

    <div class="content-box">
      <h2>Create Article</h2>

      <div class="form-group">
        <label>Article Title *</label>
        <input type="text" id="article-title" placeholder="e.g., How to Track Your Order">
        <small>This will be the page title and H1 heading</small>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label>Category *</label>
          <select id="article-category">
            <option value="getting-started">üöÄ Getting Started</option>
            <option value="tutorials">üìö Tutorials</option>
            <option value="faq">‚ùì FAQ</option>
            <option value="troubleshooting">üîß Troubleshooting</option>
            <option value="advanced">‚ö° Advanced</option>
            <option value="affiliates">üéØ Affiliates</option>
          </select>
        </div>

        <div class="form-group">
          <label>Author</label>
          <input type="text" id="article-author" value="Admin">
        </div>
      </div>

      <div class="form-group">
        <label>Content (HTML) *</label>
        <textarea id="article-content" placeholder="Write your article content here using HTML..."><h2>Introduction</h2>
<p>Start writing your article here...</p>

<h3>Step 1: ...</h3>
<p>Detailed instructions...</p>

<h3>Step 2: ...</h3>
<p>More instructions...</p></textarea>
        <small>Use HTML: &lt;h2&gt;, &lt;h3&gt;, &lt;p&gt;, &lt;ul&gt;, &lt;ol&gt;, &lt;strong&gt;, &lt;em&gt;, &lt;img&gt;, &lt;iframe&gt;</small>
      </div>

      <div class="form-group">
        <label>Tags (for search & organization)</label>
        <div class="tags-input-container" id="tags-container">
          <input type="text" class="tag-input" id="tag-input" placeholder="Add tag and press Enter..." onkeypress="handleTagInput(event)">
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label>
            <input type="checkbox" id="article-featured">
            Featured Article
          </label>
          <small>Featured articles appear first in the list</small>
        </div>

        <div class="form-group">
          <label>Display Order</label>
          <input type="number" id="article-order" value="999" min="0" max="9999">
          <small>Lower numbers appear first (0-9999)</small>
        </div>
      </div>

      <div class="form-group">
        <label>Required Customer Tags (for gated content)</label>
        <input type="text" id="article-required-tags" placeholder="e.g., affiliates, premium">
        <small>‚ö†Ô∏è <strong>Gated Access:</strong> Only customers with these tags will see this article. Leave empty for public access.</small>
      </div>

      <div style="display: flex; gap: 12px; margin-top: 30px;">
        <button class="btn btn-primary" onclick="generatePageContent()">‚ú® Generate Shopify Page Content</button>
        <button class="btn btn-secondary" onclick="clearForm()">Clear Form</button>
      </div>

      <div id="output-section" style="display: none;">
        <h3 style="margin-top: 40px; margin-bottom: 16px;">üìã Generated Content</h3>
        <div class="alert alert-info">
          Copy the content below and follow the instructions to create the page in Shopify.
        </div>

        <div style="margin-bottom: 12px; display: flex; gap: 12px;">
          <button class="btn btn-success" onclick="copyOutput()">üìã Copy to Clipboard</button>
          <button class="btn btn-secondary" onclick="downloadOutput()">üíæ Download as .txt</button>
        </div>

        <div class="output-box" id="output-content"></div>

        <div class="instruction-box" style="margin-top: 20px;">
          <h3>üìå Next Steps:</h3>
          <ol>
            <li>Copy the generated content above</li>
            <li>In Shopify Admin: <strong>Online Store ‚Üí Pages ‚Üí Add page</strong></li>
            <li>Set <strong>Title</strong> to: <span id="generated-title"></span></li>
            <li>Set <strong>Handle</strong> (URL) to: <code id="generated-handle"></code></li>
            <li>Paste the generated content into the <strong>Content</strong> field</li>
            <li>Under <strong>Theme template</strong>, select: <code>page.kb-article</code> ‚ö†Ô∏è <strong>IMPORTANT!</strong></li>
            <li>Set <strong>Search engine listing</strong> description (first 155 characters of content)</li>
            <li>Click <strong>Save</strong></li>
          </ol>
        </div>
      </div>
    </div>

    <div class="content-box" style="margin-top: 20px;">
      <h2>üí° Quick Tips</h2>

      <h3 style="margin-top: 20px; margin-bottom: 10px;">Gated Access Examples:</h3>
      <ul style="margin-left: 20px; line-height: 1.8;">
        <li><strong>Affiliates Only:</strong> Set "Required Customer Tags" to <code>affiliates</code></li>
        <li><strong>VIP Only:</strong> Set to <code>vip</code></li>
        <li><strong>Premium Members:</strong> Set to <code>premium</code></li>
        <li><strong>Multiple Tags Required:</strong> Set to <code>affiliates, verified</code> (customer needs both)</li>
        <li><strong>Public Access:</strong> Leave empty (everyone can see)</li>
      </ul>

      <h3 style="margin-top: 20px; margin-bottom: 10px;">HTML Formatting Examples:</h3>
      <div style="background: #f8fafc; padding: 15px; border-radius: 6px; font-family: monospace; font-size: 0.875rem;">
        &lt;h2&gt;Section Heading&lt;/h2&gt;<br>
        &lt;p&gt;Paragraph with &lt;strong&gt;bold&lt;/strong&gt; and &lt;em&gt;italic&lt;/em&gt;&lt;/p&gt;<br>
        &lt;ul&gt;&lt;li&gt;Bullet point&lt;/li&gt;&lt;/ul&gt;<br>
        &lt;img src="URL" alt="Description"&gt;<br>
        &lt;iframe src="https://youtube.com/embed/ID"&gt;&lt;/iframe&gt;
      </div>

      <h3 style="margin-top: 20px; margin-bottom: 10px;">Categories:</h3>
      <ul style="margin-left: 20px; line-height: 1.8;">
        <li>üöÄ <strong>Getting Started:</strong> New user guides</li>
        <li>üìö <strong>Tutorials:</strong> Step-by-step instructions</li>
        <li>‚ùì <strong>FAQ:</strong> Frequently asked questions</li>
        <li>üîß <strong>Troubleshooting:</strong> Problem solving</li>
        <li>‚ö° <strong>Advanced:</strong> Power user content</li>
        <li>üéØ <strong>Affiliates:</strong> Partner resources (typically gated)</li>
      </ul>
    </div>
  </div>

  <script>
    let currentTags = [];

    // Tag management
    function handleTagInput(event) {
      if (event.key === 'Enter') {
        event.preventDefault();
        const input = event.target;
        const tag = input.value.trim();

        if (tag && !currentTags.includes(tag)) {
          currentTags.push(tag);
          renderTags();
          input.value = '';
        }
      }
    }

    function removeTag(tag) {
      currentTags = currentTags.filter(t => t !== tag);
      renderTags();
    }

    function renderTags() {
      const container = document.getElementById('tags-container');
      const input = container.querySelector('.tag-input');

      const tagsPills = currentTags.map(tag => `
        <span class="tag-pill">
          ${escapeHtml(tag)}
          <button onclick="removeTag('${escapeHtml(tag)}')">&times;</button>
        </span>
      `).join('');

      container.innerHTML = tagsPills + input.outerHTML;
    }

    // Generate page content
    function generatePageContent() {
      const title = document.getElementById('article-title').value.trim();
      const category = document.getElementById('article-category').value;
      const author = document.getElementById('article-author').value.trim();
      const content = document.getElementById('article-content').value.trim();
      const featured = document.getElementById('article-featured').checked;
      const order = document.getElementById('article-order').value;
      const requiredTags = document.getElementById('article-required-tags').value.trim();

      if (!title || !content) {
        showAlert('Please fill in title and content!', 'warning');
        return;
      }

      const handle = generateHandle(title);

      // Generate metadata block
      const metadata = `<!--KB_METADATA
category: ${category}
tags: ${currentTags.join(', ')}
featured: ${featured}
order: ${order}
required_tags: ${requiredTags}
author: ${author}
-->`;

      // Combine metadata and content
      const pageContent = `${metadata}\n\n${content}`;

      // Display output
      document.getElementById('output-content').textContent = pageContent;
      document.getElementById('generated-title').textContent = title;
      document.getElementById('generated-handle').textContent = handle;
      document.getElementById('output-section').style.display = 'block';

      showAlert('Page content generated! Copy and follow the instructions below.', 'success');

      // Scroll to output
      document.getElementById('output-section').scrollIntoView({ behavior: 'smooth' });
    }

    function generateHandle(title) {
      return 'kb-' + title.toLowerCase()
        .replace(/[^a-z0-9]+/g, '-')
        .replace(/^-|-$/g, '');
    }

    function clearForm() {
      document.getElementById('article-title').value = '';
      document.getElementById('article-content').value = '';
      document.getElementById('article-author').value = 'Admin';
      document.getElementById('article-featured').checked = false;
      document.getElementById('article-order').value = '999';
      document.getElementById('article-required-tags').value = '';
      currentTags = [];
      renderTags();
      document.getElementById('output-section').style.display = 'none';
    }

    function copyOutput() {
      const content = document.getElementById('output-content').textContent;
      navigator.clipboard.writeText(content).then(() => {
        showAlert('Content copied to clipboard!', 'success');
      });
    }

    function downloadOutput() {
      const content = document.getElementById('output-content').textContent;
      const title = document.getElementById('article-title').value.trim();
      const filename = generateHandle(title) + '.txt';

      const blob = new Blob([content], { type: 'text/plain' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = filename;
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);

      showAlert('Downloaded as ' + filename, 'success');
    }

    function showAlert(message, type = 'success') {
      const container = document.getElementById('alert-container');
      const alert = document.createElement('div');
      alert.className = `alert alert-${type}`;
      alert.textContent = message;
      container.appendChild(alert);

      setTimeout(() => alert.remove(), 5000);
    }

    function escapeHtml(text) {
      const div = document.createElement('div');
      div.textContent = text;
      return div.innerHTML;
    }
  </script>
</body>
</html>
