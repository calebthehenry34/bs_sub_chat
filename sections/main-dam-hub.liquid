<div id="dam-hub-container"></div>

{{ 'dam-hub.js' | asset_url | script_tag }}

<script>
  document.addEventListener('DOMContentLoaded', function() {
    var folders = [];
    var files = [];

    {% for block in section.blocks %}
      {% if block.type == 'folder' %}
        folders.push({
          id: '{{ block.settings.folder_id | escape }}',
          name: '{{ block.settings.folder_name | escape }}',
          parent_id: '{{ block.settings.parent_folder_id | escape }}'
        });
      {% elsif block.type == 'file' %}
        files.push({
          id: '{{ block.id }}',
          name: '{{ block.settings.file_name | escape }}',
          url: '{{ block.settings.file_url }}',
          folder_id: '{{ block.settings.folder_id | escape }}',
          description: '{{ block.settings.file_description | escape }}'
        });
      {% endif %}
    {% endfor %}

    new DAMHub({
      containerId: 'dam-hub-container',
      folders: folders,
      files: files,
      isAdmin: {% if customer.tags contains 'admin' %}true{% else %}false{% endif %}
    }).init();
  });
</script>

{% schema %}
{
  "name": "Marketing Resources",
  "tag": "section",
  "settings": [],
  "blocks": [
    {
      "type": "folder",
      "name": "Folder",
      "settings": [
        {
          "type": "text",
          "id": "folder_id",
          "label": "Folder ID",
          "default": "folder1"
        },
        {
          "type": "text",
          "id": "folder_name",
          "label": "Folder Name",
          "default": "New Folder"
        },
        {
          "type": "text",
          "id": "parent_folder_id",
          "label": "Parent Folder ID"
        }
      ]
    },
    {
      "type": "file",
      "name": "File",
      "settings": [
        {
          "type": "text",
          "id": "file_name",
          "label": "File Name",
          "default": "file.png"
        },
        {
          "type": "url",
          "id": "file_url",
          "label": "File URL"
        },
        {
          "type": "text",
          "id": "folder_id",
          "label": "Folder ID"
        },
        {
          "type": "textarea",
          "id": "file_description",
          "label": "Description"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Marketing Resources"
    }
  ]
}
{% endschema %}
